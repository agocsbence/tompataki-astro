import { e as createAstro, c as createComponent, a as renderTemplate, f as renderSlot, b as addAttribute, m as maybeRenderHead } from './astro/server_a-LjaXZn.mjs';
import 'piccolore';
import 'clsx';
/* empty css                         */

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Astro = createAstro("https://tompataki.com");
const $$VimeoLightbox = createComponent(($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$VimeoLightbox;
  const { url, class: className = "", ariaLabel = "Play video" } = Astro2.props;
  return renderTemplate(_a || (_a = __template(["", '<button type="button"', "", "", "> ", ' </button>  <script>\n  if (!window.__vimeoLightboxInit) {\n    window.__vimeoLightboxInit = true;\n\n    function toPlayerUrl(raw) {\n      try {\n        const u = new URL(raw);\n        if (u.hostname.includes("player.vimeo.com")) return raw;\n\n        // vimeo.com/12345678 -> 12345678\n        const parts = u.pathname.split("/").filter(Boolean);\n        const id = parts[0];\n        if (!id) return raw;\n\n        const p = new URL(`https://player.vimeo.com/video/${id}`);\n        p.searchParams.set("autoplay", "1");\n        p.searchParams.set("title", "0");\n        p.searchParams.set("byline", "0");\n        p.searchParams.set("portrait", "0");\n        return p.toString();\n      } catch {\n        return raw;\n      }\n    }\n\n    function close() {\n      const overlay = document.querySelector(".vimeo-lightbox-overlay");\n      if (overlay) overlay.remove();\n      document.documentElement.style.overflow = "";\n    }\n\n    function open(rawUrl) {\n      const url = toPlayerUrl(rawUrl);\n\n      close();\n      document.documentElement.style.overflow = "hidden";\n\n      const overlay = document.createElement("div");\n      overlay.className = "vimeo-lightbox-overlay";\n      overlay.addEventListener("click", (e) => {\n        if (e.target === overlay) close();\n      });\n\n      const modal = document.createElement("div");\n      modal.className = "vimeo-lightbox-modal";\n\n      const closeBtn = document.createElement("button");\n      closeBtn.className = "vimeo-lightbox-close";\n      closeBtn.type = "button";\n      closeBtn.textContent = "\xD7";\n      closeBtn.addEventListener("click", close);\n\n      const iframe = document.createElement("iframe");\n      iframe.className = "vimeo-lightbox-iframe";\n      iframe.src = url;\n      iframe.allow = "autoplay; fullscreen; picture-in-picture";\n      iframe.allowFullscreen = true;\n\n      modal.appendChild(closeBtn);\n      modal.appendChild(iframe);\n      overlay.appendChild(modal);\n      document.body.appendChild(overlay);\n\n      closeBtn.focus();\n    }\n\n    document.addEventListener("keydown", (e) => {\n      if (e.key === "Escape") close();\n    });\n\n    document.addEventListener("click", (e) => {\n      const btn = e.target.closest?.(".vimeo-lightbox-trigger");\n      if (!btn) return;\n      const url = btn.getAttribute("data-vimeo-url");\n      if (!url) return;\n      e.preventDefault();\n      open(url);\n    });\n  }\n<\/script>'], ["", '<button type="button"', "", "", "> ", ' </button>  <script>\n  if (!window.__vimeoLightboxInit) {\n    window.__vimeoLightboxInit = true;\n\n    function toPlayerUrl(raw) {\n      try {\n        const u = new URL(raw);\n        if (u.hostname.includes("player.vimeo.com")) return raw;\n\n        // vimeo.com/12345678 -> 12345678\n        const parts = u.pathname.split("/").filter(Boolean);\n        const id = parts[0];\n        if (!id) return raw;\n\n        const p = new URL(\\`https://player.vimeo.com/video/\\${id}\\`);\n        p.searchParams.set("autoplay", "1");\n        p.searchParams.set("title", "0");\n        p.searchParams.set("byline", "0");\n        p.searchParams.set("portrait", "0");\n        return p.toString();\n      } catch {\n        return raw;\n      }\n    }\n\n    function close() {\n      const overlay = document.querySelector(".vimeo-lightbox-overlay");\n      if (overlay) overlay.remove();\n      document.documentElement.style.overflow = "";\n    }\n\n    function open(rawUrl) {\n      const url = toPlayerUrl(rawUrl);\n\n      close();\n      document.documentElement.style.overflow = "hidden";\n\n      const overlay = document.createElement("div");\n      overlay.className = "vimeo-lightbox-overlay";\n      overlay.addEventListener("click", (e) => {\n        if (e.target === overlay) close();\n      });\n\n      const modal = document.createElement("div");\n      modal.className = "vimeo-lightbox-modal";\n\n      const closeBtn = document.createElement("button");\n      closeBtn.className = "vimeo-lightbox-close";\n      closeBtn.type = "button";\n      closeBtn.textContent = "\xD7";\n      closeBtn.addEventListener("click", close);\n\n      const iframe = document.createElement("iframe");\n      iframe.className = "vimeo-lightbox-iframe";\n      iframe.src = url;\n      iframe.allow = "autoplay; fullscreen; picture-in-picture";\n      iframe.allowFullscreen = true;\n\n      modal.appendChild(closeBtn);\n      modal.appendChild(iframe);\n      overlay.appendChild(modal);\n      document.body.appendChild(overlay);\n\n      closeBtn.focus();\n    }\n\n    document.addEventListener("keydown", (e) => {\n      if (e.key === "Escape") close();\n    });\n\n    document.addEventListener("click", (e) => {\n      const btn = e.target.closest?.(".vimeo-lightbox-trigger");\n      if (!btn) return;\n      const url = btn.getAttribute("data-vimeo-url");\n      if (!url) return;\n      e.preventDefault();\n      open(url);\n    });\n  }\n<\/script>'])), maybeRenderHead(), addAttribute(`vimeo-lightbox-trigger ${className}`, "class"), addAttribute(url, "data-vimeo-url"), addAttribute(ariaLabel, "aria-label"), renderSlot($$result, $$slots["default"]));
}, "/Users/benceagocs/Documents/work/tompataki-astro/src/components/VimeoLightbox.astro", void 0);

export { $$VimeoLightbox as $ };
